<!DOCTYPE html>
<html>
<head>
    <title>RAG Interface</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 20px auto;
            padding: 0 20px;
        }
        textarea {
            width: 100%;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>RAG Interface</h1>

    <!-- Search Section -->
    <div>
        <h3>Search</h3>
        <input type="text" id="searchInput" style="width: 100%; padding: 5px;">
        <button onclick="search()">Search</button>
        <div id="searchResults"></div>
    </div>

    <!-- Upload Section -->
    <div>
        <h3>Upload Document</h3>
        <textarea id="uploadText" rows="5"></textarea>
        <select id="uploadCategory">
            <option value="callswitch">CallSwitch</option>
            <option value="teams">Teams</option>
            <option value="horizon">Horizon</option>
            <option value="mobile">Mobile</option>
        </select>
        <button onclick="uploadDocument()">Upload</button>
    </div>

    <script>
        function search() {
            const query = document.getElementById('searchInput').value;
            fetch(`/search?q=${encodeURIComponent(query)}`)
                .then(response => response.json())
                .then(data => {
                    const resultsDiv = document.getElementById('searchResults');
                    resultsDiv.innerHTML = data.map(item => 
                        `<div style="margin: 10px 0; padding: 10px; border: 1px solid #ddd;">
                            <p>${item.text}</p>
                            <p><small>Category: ${item.category}</small></p>
                            <p><small>Metadata: ${item.metadata}</small></p>
                        </div>`
                    ).join('');
                });
        }

        function uploadDocument() {
            const text = document.getElementById('uploadText').value;
            const category = document.getElementById('uploadCategory').value;
            
            if (!text.trim()) {
                alert('Please enter some text to upload');
                return;
            }
            
            fetch('/upload', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    text: text,
                    category: category
                })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    alert('Document uploaded successfully!');
                    document.getElementById('uploadText').value = '';
                } else {
                    alert('Upload failed: ' + (data.message || 'Unknown error'));
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('Error uploading document: ' + error.message);
            });
        }
    </script>
</body>
</html> 